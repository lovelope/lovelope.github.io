<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>javascript的变量提升机制 | lovelope博客</title>
    <meta name="description" content="种下一棵树的最佳时间不是十年前，而是现在。">
    
    
    <link rel="preload" href="/assets/css/0.styles.83d3ab16.css" as="style"><link rel="preload" href="/assets/js/app.5770203f.js" as="script"><link rel="preload" href="/assets/js/14.e1387c03.js" as="script"><link rel="prefetch" href="/assets/js/3.aff9079f.js"><link rel="prefetch" href="/assets/js/2.673272d7.js"><link rel="prefetch" href="/assets/js/4.a1bc754e.js"><link rel="prefetch" href="/assets/js/5.26cd1ccd.js"><link rel="prefetch" href="/assets/js/6.0af27563.js"><link rel="prefetch" href="/assets/js/7.a5fea5a1.js"><link rel="prefetch" href="/assets/js/8.cd6f4ee1.js"><link rel="prefetch" href="/assets/js/9.0bd568a0.js"><link rel="prefetch" href="/assets/js/10.368d8957.js"><link rel="prefetch" href="/assets/js/11.9f1e6fae.js"><link rel="prefetch" href="/assets/js/12.b8efd0be.js"><link rel="prefetch" href="/assets/js/13.624745ce.js"><link rel="prefetch" href="/assets/js/15.76fa5cc0.js"><link rel="prefetch" href="/assets/js/16.bcf7569f.js"><link rel="prefetch" href="/assets/js/17.51e61b79.js">
    <link rel="stylesheet" href="/assets/css/0.styles.83d3ab16.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">lovelope博客</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><!---->  <!----> </div> <div class="page"> <div class="content"><h1 id="javascript的变量提升机制"><a href="#javascript的变量提升机制" aria-hidden="true" class="header-anchor">#</a> javascript的变量提升机制</h1> <p>今天我在看《前端面试江湖》时，看到一道面试题是这样的：</p> <blockquote><p>下面的JavaScript代码段中，alert的结果是多少？</p></blockquote> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token function">alert</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>原书中给出的解析：说alert的结果是1.</p> <p>显然，作者没有做过测试。<br>
我们来看看在浏览器中的实际运行结果吧。<br> <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAPAAAACQCAIAAAC5w3GfAAAE80lEQVR42u3cP2gbVwDH8ae1Q6e6i8EqDR282MGDSAr2HI0eEgjUQ+0s9lBlCSIGY4ShjskSd3CG+BQMhUIyZPTiSYYkaCimHgwubmrjgjZDh6zpnaTT3Uln+Vw9RdxP38+S87vTywt88/yk/Mk4jnN+fl6r1QyQZmNjY1+NfJ1Zf/Ikf+fO5OTkoNcD9OT4+HhnZyezuLi4tbU16MUAFiwtLRE0dBA0pBA0pBA0pBA0pBA0pBA0pBA0pBA0pBA0pBA0pBA0pBA0pBA0pBA0pBA0pBA0pBA0pBA0pBA0pBA0pBA0pBA0pBA0pBA0pBA0pBA0pBA0pBA0pBA0pBA0pBA0pBA0pBA0pBC0XfsPM8WJk7fz3172wF/l728svDOFyslE8cYfG5+eTf/vn8ubqrcZBBG0XVcFHdzvPUeCjkHQdl0RtNvgD+bXLhv4dRB0DIK2i6AHjKBjREoJvmhcVczMzKZ3o1DxW3IrbgzV3XaaQQfDjaHQY+5rf/rTn7f+m6DyYHvGPVuHXt45gb+c+nOtiQg6jKBjdAl64V0jIe96+4FXWXBlGglWneZway+OTOGPBoP1bpvJetem0vZo8Gxwu5l2jqCjCDpG1x26bXg0+n3fP3KY6Ebq77GXBR0cU7pO8N0v4QMNR44YBB3DUtAxsV0v6I4Joid0go5B0HFC39nr54HgmNHZeXDKaJ4CjBNzEnlonnmvSx507ASRU0ZoZWgh6FjBW6+C41QXuuzQ0+GHbztObmF7ouNNYSu7awQdP0F4LFgZWggaUggaUggaUggaUggaUggaUggaUggaUggaUggaUggaUggaUggaUggaUggaUggaUggaUggaUggaUggaUggaUggaUggaUggaUggaUggaUggaUggaUggaUggaUggaUggaUggaUggaUggaUggaUggaUppBr6ysDHolgAVra2te0BsbG4NeCWBBsVgkaOggaEghaEghaEghaEghaEghaEghaEghaEghaEghaEghaEghaEgh6BT48ud/Br2EPvp3edTibASdAgSdHEGnQCPo08UvBr0Qy7LPPxqCHkIEnRxBpwBBJ0fQKUDQyRF0ChB0cgSdAv0MulrK7uZPV3OX3T97NTt99LjLAz0g6CFlL2gvz0e/N67nX5+umlL2brl11xvJRR+KMfV0/829MRu/LoIeUpZ3aDfYl9+8Wc35P3pj4Y3aHS+YzUuirZZm//6RoNELu0GfvSq9v7V6r1aa3TWmXI5uxfa23wQIekhZDbrqnzLmX++Pr9e3YhNs2e7Xm6bQ7cRhMXqCHlIWg67n7J6V87vuEcMNuj3dmFjDJxO7CHpIWQvaa/PoZtnkW0HH7NCNoIOMCRqW2T5y7Oav3KFDbbd96GHxlE3QQ6pPQY8/PfitHu1Zxw7tn0zYodEH/XlTODU1Ze7X820PulbKro/vPz6avnvgbse33hM0rOrDDh35FNq7NPcPHrkHC//94mnr4+nQH7z4mlt3zwh6SPF3OZIj6BQg6OQIOgUIOjmCTgGCTo6gU4CgkyPoFCDo5Ag6BfhvDJIj6BQg6OQIGlIIGlIIGlIIGlIIGlIIGlIIGlIIGlIIGlIIGlIIGlIIGlIIGlIIGlIIGlIIGlIIGlK8oJeXl+fm5kZHbf7DAeDzOzw83Nvby7x44Xz4cHJxcTHo9QA9yWazIyMj/wE6+Ze8laktNgAAAABJRU5ErkJggg==" alt="实际运行时结果为"undefined""><br>
是不是和你想象的有所差距呢？<br>
其实，这里隐藏着一个陷阱：JavaScript的变量提升机制。<br>
我们可以做一系列测试来看看它是怎样的。</p> <h1 id="_1-案发现场"><a href="#_1-案发现场" aria-hidden="true" class="header-anchor">#</a> 1. 案发现场</h1> <p>我们先看一段很简单的代码：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token function">alert</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>这个没有疑问吧，弹出&quot;1&quot;。OK，我们继续。<br>
我们再看一段代码：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token function">alert</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>经过运行之后，我们发现，还是和我们预期的一样，弹出了&quot;1&quot;。<br>
好了，有意思的来了。接着再看一段下面的代码：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token function">alert</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>如果这个是一个面试题，面试官问你这个结果是多少？你怎么回答？<br>
我们先看结果吧！<br> <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAPAAAACQCAIAAAC5w3GfAAAE80lEQVR42u3cP2gbVwDH8ae1Q6e6i8EqDR282MGDSAr2HI0eEgjUQ+0s9lBlCSIGY4ShjskSd3CG+BQMhUIyZPTiSYYkaCimHgwubmrjgjZDh6zpnaTT3Uln+Vw9RdxP38+S87vTywt88/yk/Mk4jnN+fl6r1QyQZmNjY1+NfJ1Zf/Ikf+fO5OTkoNcD9OT4+HhnZyezuLi4tbU16MUAFiwtLRE0dBA0pBA0pBA0pBA0pBA0pBA0pBA0pBA0pBA0pBA0pBA0pBA0pBA0pBA0pBA0pBA0pBA0pBA0pBA0pBA0pBA0pBA0pBA0pBA0pBA0pBA0pBA0pBA0pBA0pBA0pBA0pBA0pBA0pBC0XfsPM8WJk7fz3172wF/l728svDOFyslE8cYfG5+eTf/vn8ubqrcZBBG0XVcFHdzvPUeCjkHQdl0RtNvgD+bXLhv4dRB0DIK2i6AHjKBjREoJvmhcVczMzKZ3o1DxW3IrbgzV3XaaQQfDjaHQY+5rf/rTn7f+m6DyYHvGPVuHXt45gb+c+nOtiQg6jKBjdAl64V0jIe96+4FXWXBlGglWneZway+OTOGPBoP1bpvJetem0vZo8Gxwu5l2jqCjCDpG1x26bXg0+n3fP3KY6Ebq77GXBR0cU7pO8N0v4QMNR44YBB3DUtAxsV0v6I4Joid0go5B0HFC39nr54HgmNHZeXDKaJ4CjBNzEnlonnmvSx507ASRU0ZoZWgh6FjBW6+C41QXuuzQ0+GHbztObmF7ouNNYSu7awQdP0F4LFgZWggaUggaUggaUggaUggaUggaUggaUggaUggaUggaUggaUggaUggaUggaUggaUggaUggaUggaUggaUggaUggaUggaUggaUggaUggaUggaUggaUggaUggaUggaUggaUggaUggaUggaUggaUggaUggaUppBr6ysDHolgAVra2te0BsbG4NeCWBBsVgkaOggaEghaEghaEghaEghaEghaEghaEghaEghaEghaEghaEghaEgh6BT48ud/Br2EPvp3edTibASdAgSdHEGnQCPo08UvBr0Qy7LPPxqCHkIEnRxBpwBBJ0fQKUDQyRF0ChB0cgSdAv0MulrK7uZPV3OX3T97NTt99LjLAz0g6CFlL2gvz0e/N67nX5+umlL2brl11xvJRR+KMfV0/829MRu/LoIeUpZ3aDfYl9+8Wc35P3pj4Y3aHS+YzUuirZZm//6RoNELu0GfvSq9v7V6r1aa3TWmXI5uxfa23wQIekhZDbrqnzLmX++Pr9e3YhNs2e7Xm6bQ7cRhMXqCHlIWg67n7J6V87vuEcMNuj3dmFjDJxO7CHpIWQvaa/PoZtnkW0HH7NCNoIOMCRqW2T5y7Oav3KFDbbd96GHxlE3QQ6pPQY8/PfitHu1Zxw7tn0zYodEH/XlTODU1Ze7X820PulbKro/vPz6avnvgbse33hM0rOrDDh35FNq7NPcPHrkHC//94mnr4+nQH7z4mlt3zwh6SPF3OZIj6BQg6OQIOgUIOjmCTgGCTo6gU4CgkyPoFCDo5Ag6BfhvDJIj6BQg6OQIGlIIGlIIGlIIGlIIGlIIGlIIGlIIGlIIGlIIGlIIGlIIGlIIGlIIGlIIGlIIGlIIGlK8oJeXl+fm5kZHbf7DAeDzOzw83Nvby7x44Xz4cHJxcTHo9QA9yWazIyMj/wE6+Ze8laktNgAAAABJRU5ErkJggg==" alt="实际运行时结果为"undefined""><br>
结果是 &quot;undefined&quot;？和你上面自己想的一样吗？<br>
好吧，我就不故弄玄虚了。其实，这里面隐藏了一个陷阱——<strong>JavaScript中的变量提升（Hoisting）</strong>。</p> <h1 id="_2-深度剖析"><a href="#_2-深度剖析" aria-hidden="true" class="header-anchor">#</a> 2. 深度剖析</h1> <p>现在我来解释下提升是什么意思？顾名思义，就是把下面的东西提到上面。在javascript中，就是<strong>把作用域内定义在后面的变量或函数提升到前面来定义</strong>。<br>
在解释提升之前，我们先来看一下js中的作用域（scoping）问题。<br>
对于JavaScript新手来说scoping是最令人困惑的部分之一。事实上，不仅仅是新手，我遇到或很多有经验的JavaScript程序员也不能完全理解scoping。JavaScript的scoping如此复杂的原因是它看上去非常像C系语言的成员。请看下面的C程序：</p> <div class="language-c extra-class"><pre class="language-c"><code><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">int</span> x <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;%d\n, &quot;</span><span class="token punctuation">,</span> x<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 1</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">int</span> x <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
        <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;%d\n, &quot;</span><span class="token punctuation">,</span> x<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 2</span>
    <span class="token punctuation">}</span>
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;%d\n&quot;</span><span class="token punctuation">,</span> x<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 1</span>
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>这段程序的输出是1, 2, 1。这是因为在C系语言有块级作用域(block-level scope),当进入到一个块时，就像if语句，在这个块级作用域中会声明新的变量，这些变量不会影响到外部作用域。但是JavaScript却不是这样。在Firebug中试试下面的代码：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> x <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 1</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> x <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//2</span>
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 2</span>
</code></pre></div><p>在这段代码中，Firebug显示1, 2, 2。这是因为 <strong>JavaScript是函数级作用域(function-level scope)</strong>。这和C系语言是完全不同的。块，就像if语句，并不会创建一个新的作用域。只有函数才会创建新的作用域。<br>
对于大部分熟悉C，C++，C#或是Java的程序员来说，这是意料之外并且不被待见的。幸运的是，因为JavaScript函数的灵活性，对于这个问题我们有一个解决方案。如果你必须在函数中创建一个临时的作用域，请像下面这样做：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> x <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>x<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">var</span> x <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 2</span>
        <span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>       
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// x is still 1.</span>
<span class="token punctuation">}</span>
</code></pre></div><p>这种方面确实非常灵活，它使用在任何需要创建一个临时作用域的地方，不仅仅是某个块中。但是，我强烈建议你花点时间好好理解下JavaScript scoping。它实在是非常强力，而且它也是我最喜欢的语言特性之一。如果你很好的理解了scoping，理解hoisting将会更加容易。</p> <h2 id="_2-1-变量提升"><a href="#_2-1-变量提升" aria-hidden="true" class="header-anchor">#</a> 2.1 变量提升</h2> <p>变量提升，很简单，就是把变量提升提到函数的top的地方。我么需要说明的是，<strong>变量提升只是提升变量的声明，并不会把赋值也提升上来</strong>。<br>
比如：
我们定义三个变量：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">var</span> a<span class="token operator">=</span><span class="token string">'One'</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> b<span class="token operator">=</span><span class="token string">'Two'</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> c<span class="token operator">=</span><span class="token string">'Three'</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>实际上它是这样子的：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">var</span> a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> c<span class="token punctuation">;</span>
    a<span class="token operator">=</span><span class="token string">'One'</span><span class="token punctuation">;</span>
    b<span class="token operator">=</span><span class="token string">'Two'</span><span class="token punctuation">;</span>
    c<span class="token operator">=</span><span class="token string">'Three'</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><p>这个时候就把变量提升了呀。<br>
好，我们现在回到第一段代码里面。为什么会弹出<code>undefined</code>呢？其实，根据我们根据上面变量提升原理以及js的作用域（方法作用域）的分析，得知上面代码真正变成如下：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">var</span> a<span class="token punctuation">;</span>
    <span class="token function">alert</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>
    a <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>所以，才会提示说“undefined”。<br>
从这里，我们也学习到，我们在写js code 的时候，我们需要把变量放在方法作用域的顶端，比如我在上面所举的例子：<code>var a,b,c;</code>。防止出现意外。</p> <h2 id="_2-2-函数提升"><a href="#_2-2-函数提升" aria-hidden="true" class="header-anchor">#</a> 2.2 函数提升</h2> <p>函数提升是把整个函数都提到前面去。<br>
在我们写js code 的时候，我们有两种写法，一种是函数表达式，另外一种是函数声明方式。我们需要重点注意的是，只有函数声明形式才能被提升。<br>
函数声明方式提升【成功】</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">myTest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">&quot;我来自 foo&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token function">myTest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>函数表达式方式提升【失败】</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">myTest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> <span class="token function-variable function">foo</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">&quot;我来自 foo&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token function">myTest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>结果如下：<br> <img src="data:image/png;base64,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" alt="出现错误"><br>
左边报错了。没骗你。</p> <p>应该到这里基本都可以弄懂了。~</p></div> <div class="page-edit"><!----> <!----></div> <!----> </div> <!----></div></div>
    <script src="/assets/js/14.e1387c03.js" defer></script><script src="/assets/js/app.5770203f.js" defer></script>
  </body>
</html>
